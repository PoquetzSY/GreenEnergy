<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/assets/css/style.css" />
    <script type="module" src="/assets/js/script.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

</head>

<body>
    <form id="formulario" class="d-flex" style="flex-direction: column;">

        <label for="nombre-servicio">Nombre del Servicio:</label>
        <input type="text" id="nombre-servicio" name="nombre-servicio" required>

        <label for="tipo-servicio">Tipo de Servicio:</label>
        <select id="tipo-servicio" name="tipo-servicio">
            <option value="instalacion">Instalación</option>
            <option value="mantenimiento">Mantenimiento</option>
            <option value="ambos">Ambos</option>
        </select>

        <label for="origen">Origen:</label>
        <input type="radio" id="nacional" name="origen" value="nacional">
        <label for="nacional">Nacional</label>
        <input type="radio" id="extranjero" name="origen" value="extranjero">
        <label for "extranjero">Extranjero</label>

        <label for="servicios-ofrecidos">Servicios que Ofrece:</label>
        <textarea id="servicios-ofrecidos" name="servicios-ofrecidos"></textarea>

        <label for="contacto">Contactos:</label>
        <input type="text" id="contacto" name="contacto">

        <label for="link-referencia">Link de Referencia:</label>
        <input type="url" id="link-referencia" name="link-referencia">

        <label for="imagen-url">URL de la Imagen:</label>
        <input type="text" id="imagen-url" name="imagen-url">

        <label for="parrafos">Párrafos de Texto:</label>
        <textarea id="parrafos" name="parrafos"></textarea>

        <button type="submit">Enviar</button>
    </form>


    <script type="module">
        // Configura Firebase con tus credenciales
        const firebaseConfig = {
            apiKey: "AIzaSyCJVzsoV9P7JtheTAuFohRoBZIgwFkYzm0",
            authDomain: "greenenergy-5d9ae.firebaseapp.com",
            projectId: "greenenergy-5d9ae",
            storageBucket: "greenenergy-5d9ae.appspot.com",
            messagingSenderId: "1016617479815",
            appId: "1:1016617479815:web:10be57128ee6e92258d222"
        };

        // Inicializa Firebase
        firebase.initializeApp(firebaseConfig);
        // Referencia a la base de datos de Firebase
        const db = firebase.firestore();
        const catalogoCollection = db.collection('Servicios');

        const formulario = document.getElementById("formulario");

        formulario.addEventListener("submit", function (e) {
            e.preventDefault(); // Evita el envío tradicional del formulario
            

            // Recopila los datos del formulario
            const nuevoItem = {
                nombreServicio: formulario["nombre-servicio"].value,
                tipoServicio: formulario["tipo-servicio"].value,
                origen: formulario.origen.value,
                serviciosOfrecidos: formulario["servicios-ofrecidos"].value,
                contacto: formulario.contacto.value,
                linkReferencia: formulario["link-referencia"].value,
                imagenURL: formulario["imagen-url"].value, // Almacenar la URL de la imagen
                parrafos: formulario.parrafos.value,
            };

            // Agrega los datos a Firebase
            catalogoCollection.add(nuevoItem)
                .then((docRef) => {
                    console.log("Documento agregado con ID: ", docRef.id);

                    // Limpia el formulario después de enviar los datos
                    formulario.reset();
                })
                .catch((error) => {
                    console.error("Error al agregar documento: ", error);
                });
        });


    </script>
</body>

</html>